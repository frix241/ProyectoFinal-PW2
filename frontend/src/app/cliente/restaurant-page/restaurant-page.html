<div class="max-w-screen-xl mx-auto px-4 py-8">
  <h2 class="text-2xl font-bold mb-6 text-gray-700">Menús disponibles</h2>

  <div *ngFor="let menu of menus" class="bg-white shadow rounded p-4 mb-8 flex flex-col md:flex-row gap-8">
    <!-- Selección de platos -->
    <div class="flex-1">
      <p class="text-sm text-gray-500 mb-2">Fecha: {{ menu.fecha }}</p>

      <h3 class="font-semibold text-gray-700 mt-4 mb-2">Entradas:</h3>
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4">
        <div
          *ngFor="let e of menu.entradas"
          (click)="menu.entradaSeleccionada = e"
          [class.border-yellow-500]="menu.entradaSeleccionada?.id === e.id"
          class="cursor-pointer border rounded p-2 flex items-center gap-3 hover:shadow transition"
        >
          <img
            *ngIf="e.imagen"
            [src]="e.imagen"
            alt="Imagen entrada"
            class="w-16 h-16 object-cover rounded"
          />
          <div>
            <div class="font-medium">{{ e.nombre }}</div>
            <div class="text-sm text-gray-500">S/. {{ e.precio }}</div>
          </div>
        </div>
      </div>

      <h3 class="font-semibold text-gray-700 mb-2">Segundos:</h3>
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4">
        <div
          *ngFor="let s of menu.segundos"
          (click)="menu.segundoSeleccionado = s"
          [class.border-yellow-500]="menu.segundoSeleccionado?.id === s.id"
          class="cursor-pointer border rounded p-2 flex items-center gap-3 hover:shadow transition"
        >
          <img
            *ngIf="s.imagen"
            [src]="s.imagen"
            alt="Imagen segundo"
            class="w-16 h-16 object-cover rounded"
          />
          <div>
            <div class="font-medium">{{ s.nombre }}</div>
            <div class="text-sm text-gray-500">S/. {{ s.precio }}</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Resumen de selección -->
    <div class="w-full md:w-80 bg-gray-50 rounded p-4 flex flex-col gap-4 border border-gray-200">
      <h4 class="font-semibold text-gray-700 mb-2">Tu selección</h4>
      <div *ngIf="menu.entradaSeleccionada; else noEntrada">
        <div class="flex items-center gap-3">
          <img
            *ngIf="menu.entradaSeleccionada.imagen"
            [src]="menu.entradaSeleccionada.imagen"
            alt="Imagen entrada seleccionada"
            class="w-12 h-12 object-cover rounded"
          />
          <div>
            <div class="font-medium">{{ menu.entradaSeleccionada.nombre }}</div>
            <div class="text-sm text-gray-500">S/. {{ menu.entradaSeleccionada.precio }}</div>
          </div>
        </div>
      </div>
      <ng-template #noEntrada>
        <div class="text-gray-400">No has seleccionado una entrada</div>
      </ng-template>

      <div *ngIf="menu.segundoSeleccionado; else noSegundo">
        <div class="flex items-center gap-3">
          <img
            *ngIf="menu.segundoSeleccionado.imagen"
            [src]="menu.segundoSeleccionado.imagen"
            alt="Imagen segundo seleccionado"
            class="w-12 h-12 object-cover rounded"
          />
          <div>
            <div class="font-medium">{{ menu.segundoSeleccionado.nombre }}</div>
            <div class="text-sm text-gray-500">S/. {{ menu.segundoSeleccionado.precio }}</div>
          </div>
        </div>
      </div>
      <ng-template #noSegundo>
        <div class="text-gray-400">No has seleccionado un segundo</div>
      </ng-template>

      <div class="border-t pt-4 mt-2">
        <div class="flex justify-between font-semibold text-lg">
          <span>Total:</span>
          <span>
            S/.
            {{
              (menu.entradaSeleccionada?.precio || 0) +
              (menu.segundoSeleccionado?.precio || 0)
            }}
          </span>
        </div>
      </div>

      <button
        [disabled]="!menu.entradaSeleccionada || !menu.segundoSeleccionado"
        (click)="hacerPedido(menu)"
        class="mt-4 bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded transition disabled:opacity-50 disabled:cursor-not-allowed"
      >
        Confirmar pedido
      </button>
    </div>